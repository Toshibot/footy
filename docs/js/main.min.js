function scroll(){$(window).on("scroll",function(){$(this).scrollTop()>=$(".c-fixture__round").offset().top-500?$(".js-scrollto-fixture").addClass("is-hidden"):$(".js-scrollto-fixture").removeClass("is-hidden")}),$(".js-scrollto-fixture").on("click",function(){$("html, body").animate({scrollTop:$(".js-game-pregame").offset().top-36},{duration:400,specialEasing:"easeInOut"})}),$(".c-fixture__game").each(function(){$(this).hasClass("c-fixture__game--in-progress")&&($(".js-scrollto-fixture").addClass("has-live"),$(".js-scrollto-fixture").on("click",function(){$("html, body").animate({scrollTop:$(".c-fixture__game--in-progress").offset().top-36},{duration:400,specialEasing:"easeInOut"})}))})}function dataFixture(e){$.getJSON("https://statsapi.foxsports.com.au/3.0/api/sports/afl/series/1/seasons/130/fixturesandresults.json?userkey=6B2F4717-A97C-49F6-8514-3600633439B9",function(t){$.getJSON("data/fixture.json",function(s){var a=new Date,c=[],n=roundCalc(a,s);for($(".js-fixture-round").text(n),i=0;i<t.length;i++){const r=t[i];r.round.number==n&&c.push(r)}c[8];for(i=0;i<c.length;i++){const r=c[i];fixtureItem(r,e)}});var s=[];for(i=0;i<t.length;i++){const a=t[i];1==a.is_final&&s.push(a)}console.log(s),finals(s,e)})}function dataLadder(e){$.getJSON("https://statsapi.foxsports.com.au/3.0/api/sports/afl/series/1/seasons/130/ladder.json?userkey=6B2F4717-A97C-49F6-8514-3600633439B9",function(t){$(".c-ladder__round");for(i=0;i<t.teams.length;i++){const s=t.teams[i],a=e[s.code];ladderItem(s,i+1,a)}})}function data(){$.getJSON("data/clubs.json",function(e){dataLadder(e),dataFixture(e)})}function dateTime(e){var t=new Date(e),s=t.getDate();return{day:function(e){var t=e.getDay();return 0==t?"Sunday":1==t?"Monday":2==t?"Tuesday":3==t?"Wednesday":4==t?"Thursday":5==t?"Friday":6==t?"Saturday":void 0}(t),month:function(e){var t=e.getMonth();return 0==t?"Jan":1==t?"Feb":2==t?"Mar":3==t?"Apr":4==t?"May":5==t?"Jun":6==t?"Jul":7==t?"Aug":8==t?"Sep":9==t?"Oct":10==t?"Nov":11==t?"Dec":void 0}(t),date:s,time:function(e){return e.getHours()+":"+("0"+e.getMinutes()).slice(-2)}(t)}}function finals(e,t){function s(e,s){var a=s.team_A,i=s.team_B,c=t[a.code],n=t[i.code],r=dateTime(s.match_start_date),d=e.children(".c-date"),l=e.children(".js-fixture-team-1"),o=e.children(".js-fixture-team-2"),_=e.children(".js-fixture-venue");"Pre Game"==s.match_status?(d.children(".c-date__day").text(r.day),d.children(".c-date__month").text(r.month),d.children(".c-date__date").text(r.date),d.children(".c-date__time").text(r.time)):"Full Time"==s.match_status?(e.addClass("full-time"),d.children(".c-date__day").text(r.day),d.children(".c-date__month").text(r.month),d.children(".c-date__date").text(r.date),d.children(".c-date__time").text("FT")):(e.addClass("live"),d.append('<span class="c-date__live">LIVE</span><span class="c-date__status">'+s.match_status+'</span><span class="c-date__played-time">'+s.match_time+"</span>")),l.children(".js-team-img").attr("src",c.kit.home),l.children(".js-team-text").text(c.name),"Pre Game"!==s.match_status&&l.children(".js-score-text").text("").append(a.goals+". "+a.behinds+'. <span class="c-fixture__score-total">'+a.score+"</span>"),null!==i.id&&(o.children(".js-team-img").attr("src",awayKit(n.kit,a.code)),o.children(".js-team-text").text(n.name)),"Pre Game"!==s.match_status&&o.children(".js-score-text").text("").append(i.goals+". "+i.behinds+'. <span class="c-fixture__score-total">'+i.score+"</span>"),_.text(s.venue.name)}function a(e,t){var s=e.team_A,a=e.team_B,i=t[s.code],c=t[a.code];return"post"==e.match_status_normalised&&s.score>a.score?{name:i.name,bg:i.pattern}:"post"==e.match_status_normalised&&a.score>s.score?{name:c.name,bg:c.pattern}:{name:"?"}}var i=e[8];$(".js-finals-series-year").text(e[0].season.year),$(".js-premiership-year").text(e[0].season.year),s($(".js-finals-qf1"),e[0]),s($(".js-finals-qf2"),e[2]),s($(".js-finals-ef1"),e[1]),s($(".js-finals-ef2"),e[3]),s($(".js-finals-sf1"),e[4]),s($(".js-finals-sf2"),e[5]),s($(".js-finals-pf1"),e[7]),s($(".js-finals-pf2"),e[6]),s($(".js-finals-gf"),i),$(".js-premiers-name").text(a(i,t).name),$(".js-premiers-bg").css({"background-image":"url("+a(i,t).bg+")","background-size":"50%","background-repeat":"repeat"})}function fixtureItem(e,t){var s=dateTime(e.match_start_date),a=e.match_status,i=e.team_A,c=e.team_B,n=t[i.code],r=t[c.code];"Pre Game"==a?$(".js-fixture").before('<div class="c-fixture__game js-game-pregame"><div class= "c-fixture__date c-date" ><span class="c-date__day">'+s.day+'</span><span class="c-date__month">'+s.month+'</span><span class="c-date__date">'+s.date+'</span><span class="c-date__time">'+s.time+'</span></div ><div class="c-fixture__team js-fixture-team-1"><img class="js-team-img" src="'+n.kit.home+'" /><span class="js-team-text">'+n.name+'</span><span class="c-fixture__score js-score-text">-</span></div><div class="c-fixture__vs">vs</div><div class="c-fixture__team js-fixture-team-2"><img class="js-team-img" src="'+awayKit(r.kit,i.code)+'" /><span class="js-team-text">'+r.name+'</span><span class="c-fixture__score js-score-text">-</span></div><div class="c-fixture__venue js-fixture-venue">'+e.venue.name+"</div></div>"):"Full Time"==a?$(".js-fixture").before('<div class="c-fixture__game c-fixture__game--completed"><div class= "c-fixture__date c-date" ><span class="c-date__day">'+s.day+'</span><span class="c-date__month">'+s.month+'</span><span class="c-date__date">'+s.date+'</span><span class="c-date__time">FT</span></div ><div class="c-fixture__team js-fixture-team-1"><img class="js-team-img" src="'+n.kit.home+'" /><span class="js-team-text">'+n.name+'</span><span class="c-fixture__score js-score-text">'+i.goals+". "+i.behinds+'. <span class="c-fixture__score-total">'+i.score+'</span></span></div><div class="c-fixture__vs">vs</div><div class="c-fixture__team js-fixture-team-2"><img class="js-team-img" src="'+awayKit(r.kit,i.code)+'" /><span class="js-team-text">'+r.name+'</span><span class="c-fixture__score js-score-text">'+c.goals+". "+c.behinds+'. <span class="c-fixture__score-total">'+c.score+'</span></span></div><div class="c-fixture__venue js-fixture-venue">'+e.venue.name+"</div></div>"):$(".js-fixture").before('<div class="c-fixture__game c-fixture__game--in-progress"><div class= "c-fixture__date c-date" ><span class="c-date__live">LIVE</span><span class="c-date__status">'+a+'</span><span class="c-date__time">'+e.match_time+'</span></div ><div class="c-fixture__team js-fixture-team-1"><img class="js-team-img" src="'+n.kit.home+'" /><span class="js-team-text">'+n.name+'</span><span class="c-fixture__score js-score-text">'+i.goals+". "+i.behinds+'. <span class="c-fixture__score-total">'+i.score+'</span></span></div><div class="c-fixture__vs">vs</div><div class="c-fixture__team js-fixture-team-2"><img class="js-team-img" src="'+awayKit(r.kit,i.code)+'" /><span class="js-team-text">'+r.name+'</span><span class="c-fixture__score js-score-text">'+c.goals+". "+c.behinds+'. <span class="c-fixture__score-total">'+c.score+'</span></span></div><div class="c-fixture__venue js-fixture-venue">'+e.venue.name+"</div></div>")}function awayKit(e,t){return e.clash.teams.includes(t)?e.clash.kit:e.away}function ladderItem(e,t,s){$(".c-ladder__item-"+t+" div.c-ladder__team").children("span").text(s.name),$(".c-ladder__item-"+t+" div.c-ladder__team").children("img").attr("src",s.logo),$(".c-ladder__item-"+t+" div.c-ladder__played").text(e.stats.played),$(".c-ladder__item-"+t+" div.c-ladder__wins").text(e.stats.won),$(".c-ladder__item-"+t+" div.c-ladder__draws").text(e.stats.drawn),$(".c-ladder__item-"+t+" div.c-ladder__losses").text(e.stats.lost),$(".c-ladder__item-"+t+" div.c-ladder__points-for").text(e.stats.for),$(".c-ladder__item-"+t+" div.c-ladder__points-against").text(e.stats.against),$(".c-ladder__item-"+t+" div.c-ladder__percentage").text(e.stats.percentage),$(".c-ladder__item-"+t+" div.c-ladder__points").text(e.stats.points)}function roundCalc(e,t){for(i=0;i<t.length;i++){const s=t[i],a=new Date(s.start),c=new Date(s.end);if(a<e&&e<c)return s.round}}function vertCenter(e,t){var s=e.parent().height();e.css({height:s+"px","line-height":s+"px"}),e.children(t).css({height:e.children(t).height(),"padding-top":(s-e.children(t).height())/2+"px","padding-bottom":(s-e.children(t).height())/2+"px"})}function clearStyles(e,t){e.attr("style",""),t.attr("style","")}data(),$(window).on("resize",function(){});
